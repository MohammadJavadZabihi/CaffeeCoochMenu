@model List<CaffeeCoochMenu.Core.Entities.Category>

@{
    ViewData["Title"] = "CategoryIndex";
}

<main class="main-content">
    <!-- Categories Section -->
    <section id="categories-section">
        <div class="section-header">
            <h2>مدیریت دسته‌بندی‌ها</h2>
            <a class="btn-primary" asp-area="AdminDashboard" asp-controller="Category" asp-action="AddCategory">افزودن دسته‌بندی جدید</a>
        </div>

        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert-success">
                @TempData["SuccessMessage"]
            </div>
        }
        else if (TempData["ErrorMessage"] != null)
        {
            <div class="alert-error">
                @TempData["ErrorMessage"]
            </div>
        }

        <div class="products-grid">
            @foreach (var category in Model)
            {
            <div class="product-card">
                <div class="product-info">
                        <div class="product-image">
                            <img src="@category.ImageUrl" alt="@category.Name" onerror="this.src='/images/placeholder.jpg'">
                        </div>
                    <h4>@category.Name</h4>

                    <div class="product-actions">
                            <form method="post" asp-controller="Category" asp-action="DeleteCategory" asp-area="AdminDashboard"
                              onsubmit="return confirm('آیا مطمئن هستید می‌خواهید این دسته‌بندی را حذف کنید؟');">
                            <input type="hidden" name="Id" value="@category.Id" />
                            @Html.AntiForgeryToken()
                            <button type="submit" class="btn-delete">حذف</button>
                        </form>
                    </div>
                </div>
            </div>
            }
        </div>
    </section>
</main>