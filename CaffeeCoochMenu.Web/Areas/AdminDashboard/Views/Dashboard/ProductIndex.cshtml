@model List<CaffeeCoochMenu.Core.Entities.Product>

@{
    ViewData["Title"] = "ProductIndex";
}

<main class="main-content">
    <!-- Products Section -->
    <section id="products-section">
        <div class="section-header">
            <h2>مدیریت محصولات</h2>
            <a class="btn-primary" asp-area="AdminDashboard" asp-controller="Produc" asp-action="AddProduct">افزودن محصول جدید</a>

            <!-- Search Bar -->
            <form method="get" asp-area="AdminDashboard" asp-controller="Dashboard" asp-action="Index" class="search-form">
                <input type="text" name="searchTerm" placeholder="جستجو محصولات..." value="@ViewBag.CurrentSearch" />
                <button type="submit">جستجو</button>
            </form>

        </div>

        <div class="products-grid">

            @foreach (var product in Model)
            {
                <div class="product-card">
                    <div class="product-image">
                        <img src="@product.ImageUrl" alt="@product.Name" onerror="this.src='/images/placeholder.jpg'">
                    </div>
                    <div class="product-info">
                        <h4>@product.Name</h4>
                        <p class="product-category">@product.Description</p>
                        <p class="product-price">@product.Price تومان</p>
                        <div class="product-actions">
                            <a asp-area="AdminDashboard"
                               asp-controller="Produc"
                               asp-action="EditProduct"
                               asp-route-id="@product.Id"
                               class="btn-edit">
                                ویرایش
                            </a>

                            <form method="post" asp-controller="Produc" asp-action="DeleteProduct" asp-area="AdminDashboard"
                                  onsubmit="return confirm('آیا مطمئن هستید می‌خواهید این محصول را حذف کنید؟');">
                                <input type="hidden" name="Id" value="@product.Id" />
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn-delete">حذف</button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>
</main>

